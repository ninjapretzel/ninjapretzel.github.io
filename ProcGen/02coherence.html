<html>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<head>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">
		<link rel="stylesheet" href="./styles.css">
		<script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>
		<script src="02coherence.js"></script>
		
	</head>
		
	<body class="brown lighten-3">
		<div class="container row">
			<div class="card blue-grey lighten-4 center"> 
				<h1>Procedural Generation</h1>
				<h3>Noise functions and Basis for higher-order noise</h3>
			</div>
			
			<div class="col s12">
				<h5>Coherence</h5>
				<p>
					The concept of coherence is important to generating textures that are ａｅｓｔｈｅｔｉｃａｌｌｙ ｐｌｅａｓｉｎｇ.
					Without coherence, the texture overall will look noisy and random, rather than smooth and natural.
					Coherence gives the generated image some form of structure. The output from the raw hash function is not coherent, 
					but we create a different process to generate coherent noise from the raw noise.
				</p>
				
				<p>
					Below, there are some boxes that have procedurally generated textures in them. 
					The left of these boxes has 'raw' noise in it. The other two boxes to the right are two different filters
					applied onto the same noise field, to generate coherent noise.
					When zoomed all of the way 'out', these fields will all look similar, but when zoomed in, the fields have their own characteristics.
				</p>
			</div> 

			<div class="card blue-grey darken-4 col s12">
				<h5 class="white-text">Comparison of 'raw' noise and 'coherent' noise</h5>
				<tt class="cyan-text text-lighten-3">Interactive; Click and drag to move the noise fields!</tt>
				<canvas id="canvas" width="600" height="250" style="border:1px solid #000000;">
					
				</canvas>
				<br>
			</div>	
			
			<div class="col s12">
				<p>
					Some stuff to note: 
					<ul>
						<li>At any scale, the raw noise looks roughly the same- like old TV static.</li>
						<li>At Integer Positions, when zoomed all the way out, all 3 textures look roughly the same</li>
						<li>Many features are present in both the Interpolated Noise and the Smoothed Interpolated Noise at any scale</li>
					</ul>
				</p>
			
				<p>
					Interpolated noises create a field that is coherent, even at non-integer offsets.
					the noise field generated by the raw function has wildly different values at possible point.
				</p>
					
				<p>
					The 'Raw Noise' block is generated by this function, applying using the hash function from the previous page:
				</p>
			
			</div>
		
			<div class="card blue-grey lighten-4 col s8 offset-s2">
				<div class="chip">(NVIDIA CG)</div><pre>
function hash2d(x, y) { 
	return hash(x + 1337*y);
}</pre>
			</div>	
			
			
			<div class="col s12">
				<p>
					<h5>Interpolation</h5>
					We then take the output from that 2d hash function, and 'Interpolate' it. We sample the function only at fixed points-
					In this case, integer values for x and y, and then 'Interpolate' between the nearest sample points to determine the 
					value at any given point. Interpolation takes data that is known, and then creates more data between the known data.
					The most well known interpolation function is <i>Linear Interpolation</i>, or <i>lerp</i> for short.
				</p>
			</div>
	
			<div class="card blue-grey lighten-4 col s8 offset-s2">
				<div class="chip">(NVIDIA CG)</div><pre>function lerp(a, b, x) { return a + (b-a) * x; }</pre>
			</div>
	
			<div class="col s12">
				<p>
					This function is very commonly used in all sorts of applications. It can be used for animation, for smoothing
					images, mixing colors, and anything else that can be done by taking two points, and moving to some position between them.
					There are also variations on this idea, that interpolate between values in a more smooth fashion.
				</p>
			</div>
			
			<div class="card blue-grey lighten-4 col s8 offset-s2">
				<div class="chip">(NVIDIA CG)</div><pre>
function coserp(a, b, x) { 
	var ft = x * 3.1415927;
	var f = (1 - Math.cos(ft)) * .5;
	return a + (b-a) * f;
}

function smoothstep(a, b, x) {
	var t = saturate((x - a)/(b - a));
    return t*t*(3.0 - (2.0*t));
}
</pre>
			</div>
			
	
			<div class="card blue-grey darken-4 col s12">
				<div class="row">
					<div class="col s12 center white-text">
						<h5>Comparison of Different Interpolation Functions</h5>
						For all of these graphs, a is 0, and b is 1.
						The vertical represents the inputs 'a' and 'b', as well as the output of the function.
						The horizontal represents the input 'f'.
						Also, all of these interpolation methods not only work for scalars, but also on vectors of any length.
					</div>
					<div class="col s12">.</div>
					<div class="col s4 center white-text">Linear<br><tt>lerp(a, b, f)</tt></div>
					<div class="col s4 center white-text">Cosine<br><tt>coserp(a, b, f)</tt></div>
					<div class="col s4 center white-text">'Hermite'<br><tt>smoothStep(a, b, f)</tt></div>
					<div class="col s4 center">
						<svg viewbox="-20 -20 140 140">
							<g class="graph-lines">
								<line x1="0" x2="100" y1="100" y2="100" style="stroke-width:.5"/>
								<line x1="0" x2="0" y1="0" y2="100" style="stroke-width:.5"/>
								<line x1="0" x2="100" y1="0" y2="0" />
								<line x1="0" x2="100" y1="10" y2="10" />
								<line x1="0" x2="100" y1="20" y2="20" />
								<line x1="0" x2="100" y1="30" y2="30" />
								<line x1="0" x2="100" y1="40" y2="40" />
								<line x1="0" x2="100" y1="50" y2="50" />
								<line x1="0" x2="100" y1="60" y2="60" />
								<line x1="0" x2="100" y1="70" y2="70" />
								<line x1="0" x2="100" y1="80" y2="80" />
								<line x1="0" x2="100" y1="90" y2="90" />
								<line x1="0" x2="100" y1="100" y2="100" />

								<line x1="0" x2="0" y1="0" y2="100" />
								<line x1="10" x2="10" y1="0" y2="100" />
								<line x1="20" x2="20" y1="0" y2="100" />
								<line x1="30" x2="30" y1="0" y2="100" />
								<line x1="40" x2="40" y1="0" y2="100" />
								<line x1="50" x2="50" y1="0" y2="100" />
								<line x1="60" x2="60" y1="0" y2="100" />
								<line x1="70" x2="70" y1="0" y2="100" />
								<line x1="80" x2="80" y1="0" y2="100" />
								<line x1="90" x2="90" y1="0" y2="100" />
								<line x1="100" x2="100" y1="0" y2="100" />
							</g>
							<g class="graph-labels">
								<text x="23" y="113">f (position)</text>
								<text x="-3" y="113">0</text>
								<text x="97" y="113">1</text>
								
								<text x="-18" y="50">in</text>
								<text x="-20" y="60">out</text>
								<text x="-10" y="103">0</text>
								<text x="-10" y="5">1</text>
								
								<text x="2" y="92">a</text>
								<text x="92" y="-5">b</text>
							</g>
							<g class="graph-dots">
								<circle cx="0" cy="100" r="3" fill="#C84"/>
								<circle cx="100" cy="0" r="3" fill="#C84"/>
							</g>
							
							<g id="linearGraph" class="graph-dots">
							</g>
						</svg>
					</div>
					<div class="col s4 center">
						<svg viewbox="-20 -20 140 140">
							<g class="graph-lines">
								<line x1="0" x2="100" y1="100" y2="100" style="stroke-width:.5"/>
								<line x1="0" x2="0" y1="0" y2="100" style="stroke-width:.5"/>
								<line x1="0" x2="100" y1="0" y2="0" />
								<line x1="0" x2="100" y1="10" y2="10" />
								<line x1="0" x2="100" y1="20" y2="20" />
								<line x1="0" x2="100" y1="30" y2="30" />
								<line x1="0" x2="100" y1="40" y2="40" />
								<line x1="0" x2="100" y1="50" y2="50" />
								<line x1="0" x2="100" y1="60" y2="60" />
								<line x1="0" x2="100" y1="70" y2="70" />
								<line x1="0" x2="100" y1="80" y2="80" />
								<line x1="0" x2="100" y1="90" y2="90" />
								<line x1="0" x2="100" y1="100" y2="100" />

								<line x1="0" x2="0" y1="0" y2="100" />
								<line x1="10" x2="10" y1="0" y2="100" />
								<line x1="20" x2="20" y1="0" y2="100" />
								<line x1="30" x2="30" y1="0" y2="100" />
								<line x1="40" x2="40" y1="0" y2="100" />
								<line x1="50" x2="50" y1="0" y2="100" />
								<line x1="60" x2="60" y1="0" y2="100" />
								<line x1="70" x2="70" y1="0" y2="100" />
								<line x1="80" x2="80" y1="0" y2="100" />
								<line x1="90" x2="90" y1="0" y2="100" />
								<line x1="100" x2="100" y1="0" y2="100" />
							</g>
							<g class="graph-labels">
								<text x="23" y="113">f (position)</text>
								<text x="-3" y="113">0</text>
								<text x="97" y="113">1</text>
								
								<text x="-18" y="50">in</text>
								<text x="-20" y="60">out</text>
								<text x="-10" y="103">0</text>
								<text x="-10" y="5">1</text>
								
								<text x="2" y="92">a</text>
								<text x="92" y="-5">b</text>
							</g>
							<g class="graph-dots">
								<circle cx="0" cy="100" r="3" fill="#C84"/>
								<circle cx="100" cy="0" r="3" fill="#C84"/>
							</g>
							<g id="cosineGraph" class="graph-dots">
							</g>
						</svg>
					</div>					
					<div class="col s4 center">
						<svg viewbox="-20 -20 140 140">
							<g class="graph-lines">
								<line x1="0" x2="100" y1="100" y2="100" style="stroke-width:.5"/>
								<line x1="0" x2="0" y1="0" y2="100" style="stroke-width:.5"/>
								<line x1="0" x2="100" y1="0" y2="0" />
								<line x1="0" x2="100" y1="10" y2="10" />
								<line x1="0" x2="100" y1="20" y2="20" />
								<line x1="0" x2="100" y1="30" y2="30" />
								<line x1="0" x2="100" y1="40" y2="40" />
								<line x1="0" x2="100" y1="50" y2="50" />
								<line x1="0" x2="100" y1="60" y2="60" />
								<line x1="0" x2="100" y1="70" y2="70" />
								<line x1="0" x2="100" y1="80" y2="80" />
								<line x1="0" x2="100" y1="90" y2="90" />
								<line x1="0" x2="100" y1="100" y2="100" />

								<line x1="0" x2="0" y1="0" y2="100" />
								<line x1="10" x2="10" y1="0" y2="100" />
								<line x1="20" x2="20" y1="0" y2="100" />
								<line x1="30" x2="30" y1="0" y2="100" />
								<line x1="40" x2="40" y1="0" y2="100" />
								<line x1="50" x2="50" y1="0" y2="100" />
								<line x1="60" x2="60" y1="0" y2="100" />
								<line x1="70" x2="70" y1="0" y2="100" />
								<line x1="80" x2="80" y1="0" y2="100" />
								<line x1="90" x2="90" y1="0" y2="100" />
								<line x1="100" x2="100" y1="0" y2="100" />
							</g>
							<g class="graph-labels">
								<text x="23" y="113">f (position)</text>
								<text x="-3" y="113">0</text>
								<text x="97" y="113">1</text>
								
								<text x="-18" y="50">in</text>
								<text x="-20" y="60">out</text>
								<text x="-10" y="103">0</text>
								<text x="-10" y="5">1</text>
								
								<text x="2" y="92">a</text>
								<text x="92" y="-5">b</text>
							</g>
							<g class="graph-dots">
								<circle cx="0" cy="100" r="3" fill="#C84"/>
								<circle cx="100" cy="0" r="3" fill="#C84"/>
							</g>
							<g id="smoothGraph" class="graph-dots"></g>
						</svg>
					</div>
				</div>
			</div>	
	
			<div class="card blue-grey lighten-4 col s8 offset-s2">
				<div class="chip">(NVIDIA CG)</div><pre>
function noise2d(x,y) {
	var ix = Math.floor(x);	//Integer X
	var fx = x-ix;          //Fractional X
	var iy = Math.floor(y);	//Integer Y
	var fy = y-iy;          //Fractional Y
	
	var v1 = hash2d(ix  , iy  ); //Sample 
	var v2 = hash2d(ix+1, iy  ); //4 integer points
	var v3 = hash2d(ix  , iy+1); //around (x,y)
	var v4 = hash2d(ix+1, iy+1);
	
	var i1 = coserp(v1, v2, fx); //Interpolate across x axis
	var i2 = coserp(v3, v4, fx);
	return coserp(i1, i2, fy); //Interpolate across y axis
}</pre>
			</div>
			<div class="col s12">
				<p>
					
				</p>
			</div>
			
			<div class="card blue-grey darken-4 col s12">
				<h5 class="white-text"><tt>Interpolation</tt></h5>
				<svg viewbox="-20 -20 140 140" height="500px" xmlns="http://www.w3.org/2000/svg">
					<g class="graph-lines">
						<line x1="00" x2="100" y1="20" y2="20" style="stroke-width:.5"/>
						<line x1="20" x2="20" y1="0" y2="100" style="stroke-width:.5"/>
						
						<line x1="0" x2="100" y1="0" y2="0" />
						<line x1="0" x2="100" y1="10" y2="10" />
						<line x1="0" x2="100" y1="20" y2="20" />
						<line x1="0" x2="100" y1="30" y2="30" />
						<line x1="0" x2="100" y1="40" y2="40" />
						<line x1="0" x2="100" y1="50" y2="50" />
						<line x1="0" x2="100" y1="60" y2="60" />
						<line x1="0" x2="100" y1="70" y2="70" />
						<line x1="0" x2="100" y1="80" y2="80" />
						<line x1="0" x2="100" y1="90" y2="90" />
						<line x1="0" x2="100" y1="100" y2="100" />
						
						<line x1="0" x2="0" y1="0" y2="100" />
						<line x1="10" x2="10" y1="0" y2="100" />
						<line x1="20" x2="20" y1="0" y2="100" />
						<line x1="30" x2="30" y1="0" y2="100" />
						<line x1="40" x2="40" y1="0" y2="100" />
						<line x1="50" x2="50" y1="0" y2="100" />
						<line x1="60" x2="60" y1="0" y2="100" />
						<line x1="70" x2="70" y1="0" y2="100" />
						<line x1="80" x2="80" y1="0" y2="100" />
						<line x1="90" x2="90" y1="0" y2="100" />
						<line x1="100" x2="100" y1="0" y2="100" />
					</g>
					
					
					<g class="graph-labels-tiny">
						<text x="-5" y="22">x</text>
						<text x="19" y="-5">y</text>
						<text x="35" y="38">v1</text>
						<text x="61" y="38">v2</text>
						<text x="35" y="64">v3</text>
						<text x="61" y="64">v4</text>
						<text x="54" y="38" fill="#CC4">i1</text>
						<text x="54" y="58" fill="#CC4">i2</text>
						<text x="54" y="47" fill="#C44">(x,y)</text>
					</g>
					
					<g class="graph-dots">
						<circle cx="40" cy="40" r="1" />
						<circle cx="60" cy="40" r="1" />
						<circle cx="40" cy="60" r="1" />
						<circle cx="60" cy="60" r="1" />
						<circle cx="53" cy="40" r="1" fill="#CC4"/>
						<circle cx="53" cy="60" r="1" fill="#CC4"/>
						<circle cx="53" cy="47" r="1" fill="#C44"/>
					</g>
					
					<g class="dist-lines">
						<line x1="20" x2="60" y1="19" y2="19" />
						<line x1="20" x2="20" y1="20" y2="18" />
						<line x1="40" x2="40" y1="20" y2="18" />
						<line x1="60" x2="60" y1="20" y2="18" />
						
						<line x1="19" x2="19" y1="20" y2="60" />
						<line x1="20" x2="18" y1="60" y2="60" />
						<line x1="20" x2="18" y1="40" y2="40" />
						<line x1="20" x2="18" y1="20" y2="20" />
						
						<line x1="40" x2="53" y1="39" y2="39" />
						<line x1="40" x2="40" y1="40" y2="38" />
						<line x1="53" x2="53" y1="40" y2="38" />
						
						<line x1="39" x2="39" y1="40" y2="47" />
						<line x1="40" x2="38" y1="40" y2="40" />
						<line x1="40" x2="38" y1="47" y2="47" />
					</g>
					
					<g class="dist-dash">
						<line x1="40" x2="60" y1="40" y2="40" />
						<line x1="40" x2="60" y1="60" y2="60" />
						<line x1="53" x2="53" y1="40" y2="60" stroke="#C44" />
					</g>
					<g class="dist-labels">
						<text x="27.5" y="17">ix</text>
						<text x="13" y="31">iy</text>
						<text x="48" y="17" fill="#C84">1</text>
						<text x="13" y="52" fill="#C84">1</text>
						<text x="45" y="35">fx</text>
						<text x="31" y="44">fy</text>
					</g>
				</svg>
			</div>
			
			<div class="card blue-grey lighten-3 col s10 offset-s1">
				<h4>Coherent Noise: Definition</h4>
				<p>
					A type of smooth, pseudorandom noise, generated by a coherent-noise function, with 3 main properties:
					<ol>
						<li>Passing in the same input will result in the same output.</li>
						<li>A small change to the input will result in a small change to the output.</li>
						<li>A large change to the input will result in a unpredictable change to the output.</li>
					</ol>
					<span class="small">Taken from <a href="http://libnoise.sourceforge.net/coherentnoise/index.html">libnoise's documentation</a></span>
				</p>
			</div>
					
			
					
					
					
				
				
				
			
			
		</div>
		
	</body>
	
</html>



		


	
	
